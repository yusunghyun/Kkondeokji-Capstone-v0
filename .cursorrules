# 껀덕지 프로젝트 커서룰

## 프로젝트 개요
껀덕지는 QR 코드를 통한 만남과 AI 기반 설문조사를 통해 사용자 간의 궁합을 분석하는 매칭 플랫폼입니다.

## 핵심 기능
1. **사용자 인증 및 프로필 관리** - Supabase Auth 기반
2. **AI 기반 개인화 설문조사** - Grok AI 활용
3. **QR 코드 기반 매칭 시스템** - 고유 QR 코드 생성/스캔
4. **AI 기반 궁합 분석** - 매칭 점수 및 인사이트 생성
5. **매칭 결과 및 프로필 관리** - 리포트 및 기록 관리

## 기술 스택
- **Frontend**: Next.js 15, React 18, TypeScript, Tailwind CSS, Shadcn UI, Zustand
- **Backend**: Supabase (Auth, Database, Realtime)
- **AI**: Grok AI (설문 생성, 매칭 인사이트)
- **Database**: PostgreSQL (Supabase)

## 주요 페이지 구조
- `/` - 홈페이지 (설문 시작)
- `/onboarding` - 온보딩 (회원가입 + 프로필 입력)
- `/auth/login` - 로그인
- `/survey` - 설문 진행
- `/profile` - 프로필 관리 (QR 코드, 매칭 기록)
- `/scan` - QR 코드 스캔
- `/match/[code]` - 매칭 페이지
- `/match/report/[id]` - 매칭 리포트

## 데이터베이스 구조
- **users**: 사용자 기본 정보
- **survey_templates**: 설문 템플릿
- **questions**: 설문 질문
- **options**: 질문 선택지
- **user_surveys**: 사용자 설문 진행 상태
- **user_responses**: 사용자 설문 응답
- **matches**: 매칭 결과
- **qr_codes**: QR 코드 정보

## 현재 개선 필요사항
1. **설문 커스터마이징**: 랜덤 선택 → AI 개인화 설문 활성화
2. **인증 플로우**: 중복 코드 정리 및 에러 처리 개선
3. **프로필 UI/UX**: 매칭 결과 표시 개선, 상대방 정보 추가
4. **코드 정리**: 중복 코드 제거 및 리팩토링

## 개발 가이드라인
- TypeScript 사용 필수
- 컴포넌트는 PascalCase, 파일은 kebab-case
- Zustand를 통한 상태 관리
- Shadcn UI 컴포넌트 우선 사용
- 반응형 디자인 (모바일 우선)
- 그라데이션 배경 (초록-파랑) 유지

## 사용자 플로우
### 신규 사용자
1. 회원가입/로그인 → 온보딩 페이지
2. 프로필 입력 (이름, 나이, 직업)
3. AI 설문 생성 → 설문 진행
4. QR 코드 생성 → 프로필 완성
5. 매칭 시작 (QR 스캔 또는 아이디 입력)

### 기존 사용자
1. 로그인 → 홈페이지
2. 설문 재진행 또는 매칭 시작
3. QR 스캔 또는 아이디 입력
4. 매칭 결과 확인 → 리포트 조회

## 코드 스타일
- 함수형 컴포넌트 사용
- Custom hooks 활용
- 에러 처리 필수
- 로딩 상태 관리
- TypeScript 인터페이스 정의
- Zod를 통한 데이터 검증

사전 분석
	•	지금 필요한 건 기술 설계서가 아니라 “사람의 언어로 정리된 기획서”—팀이 한 눈에 공감하고, Cursor에 “결정 원칙”으로 넣어도 자연스러운 내러티브형 브리프.
	•	최소컷은 설문(Blitz) → 요약 결과 → QR 공유 → 상호 공유 결과 페이지. 5시간 내 데모 가능해야 함.

⸻

껀덕지(Geondeokji) 크리에이티브 브리프 — “어? 너도?”를 설계하는 법

1) 한 줄 정의

껀덕지는 피상적인 자기소개를 공통 관심사의 순간으로 바꿔, 오프라인 자리에서 “어? 너도?”가 자연스레 터지게 만드는 서비스다.

2) 문제 인식(사람의 말로)
	•	“이름·학과·나이… 말은 했는데 친해진 건 아무도 없다.”
	•	“MBTI로 불씨는 붙는데, 관심사가 만나야 불이 된다.”
	•	“우연히 ‘나는 솔로’ 얘기 나오면 바로 친해진다. 운빨을 줄이고 싶다.”

3) 우리의 약속(가치 제안)
	•	3초 안에 공감 포인트를 보여준다: 상대와 내 공통칩 1개를 화면 상단에 크게.
	•	말문을 여는 한 문장을 대신 건넨다: “둘 다 ‘나는 솔로 24기’ 시청자! 가장 기억난 장면은?”
	•	사생활을 침범하지 않는다: 내가 공개한 칩만, 내가 고른 자리에서만, 내가 원할 때만.

4) 톤 & 바디랭귀지(브랜드 보이스)
	•	따뜻한 객관성: 판단하지 않고, 둘 사이를 비켜준다.
	•	짧고 선명한 문장: “둘 다 ○○.” “먼저 골라주세요.”
	•	행동을 부르는 카피: “이 주제로 먼저 얘기해볼까요?”

5) 경험 스토리(한 장짜리 시나리오)
	1.	현장: OT/세미나/모임에서 QR을 본다.
	2.	60초 설문: 드라마·운동·음악·지역·책·도구 중 8문항을 빠르게.
	3.	나의 카드: 칩 6개가 색으로 정리된 요약 카드가 즉시 생성된다.
	4.	공유: 내 QR을 보여주거나 링크를 보낸다(카톡 공유 문구: “우리 관심사 맞춰볼래?”).
	5.	결과: 두 사람의 공통칩 6개, 하이라이트 1개와 아이스브레이커 1문장.
	6.	그 자리에서 대화 시작(채팅은 선택·오프라인 대화 유도).

6) 설문 철학(문과 버전)
	•	질문은 ‘신상’이 아니라 ‘취향’: “요즘 빠진 콘텐츠/활동/도구/동네/책”
	•	세대 감수성: 20대에 ‘미스터트롯’을, 40대에 ‘하트시그널’을 강요하지 않는다.
	•	대답의 온도: 좋아요/보통/싫어요 같은 감정 스케일과 경험 단계(미시청/보는중/완주/재시청)를 섞는다.
	•	업데이트는 놀이: 한 주에 3문항, 30초 루틴. “이번 주 키워드: 송파·러닝·예능”.

설문 블록(8문항 샘플 카피)
	1.	요즘 가장 손이 가는 영상 카테고리는? (테크 다큐/예능/드라마/e스포츠)
	2.	운동 루틴은? (웨이트·크로스핏/러닝·사이클/구기/안함)
	3.	요즘 나를 설명하는 음악 한 장르? (재즈/힙합/K-팝/클래식)
	4.	자주 걷는 동네는 어디인가요? (자유선택칩·비공개 가능)
	5.	최근 읽고 있거나 남에게 추천할 책/작가는? (선택+없으면 패스)
	6.	작업 도구 하나만 고른다면? (Figma/VS Code/Notion/기타)
	7.	하루 중 집중 시간대는? (오전/오후/야간/새벽)
	8.	다음 중 함께 하면 즐거울 이벤트는? (보드게임밤/러닝크루/해커톤/책모임)

요약 규칙: 선택지는 칩으로, 스케일은 온도계 이모지로, 비공개는 흐릿하게.

7) 결과 화면 구성(말 걸기 우선)
	•	상단 배너: “둘 다 ○○!”(가장 강한 공통칩 1개)
	•	칩 6개: 카테고리 색(미디어·운동·지역·책·음악·도구)로 명료하게
	•	첫 문장 제안: “하나만 고른다면 ○○ vs ○○?”
	•	선택 버튼 2개: “바로 얘기하기” / “나중에 저장”
	•	푸터: 공개 범위 안내(“이 화면은 당신이 공개한 칩으로만 만들어졌어요.”)

8) 장소별 사용 시나리오(미세 설계)
	•	OT/MT: 집합 전 5분 QR 노출 → 설문 → 자리 바꾸기 전에 1매칭씩.
	•	세미나/학회: 네임택 뒤 QR → 쉬는 시간 1매칭 → 발표 뒤 1매칭.
	•	컨퍼런스: 트랙별 키워드 칩 제공(예: “GenAI/UX리서치/데이터가시화”).

9) 윤리와 안전(간단한 약속)
	•	내가 고른 칩만 공개: 위치·학교·연락처는 기본 비공개.
	•	1회용 QR: 짧게 열리고, 흔적은 남겨도 신상은 남기지 않는다.
	•	차단/신고 한 번: 불쾌함을 느끼면 즉시 떠날 수 있어야 한다.

10) 성공의 모습(정량을 사람의 말로 번역)
	•	“자리에서 3초 만에 공감이 보였다.”
	•	“대화가 자연히 이어졌다. 숫자 교환을 강요하지 않았다.”
	•	“다음 모임에서 한 번 더 쓰고 싶다.”

⸻



14) 간단한 프레임(의사결정 체크리스트)
	•	이 문장이 사람을 움직이는가?(행동 동사로 시작)
	•	이 화면에서 주인공은 ‘대화’인가, ‘앱’인가?
	•	3초 안에 ‘공통 1개’가 눈에 띄는가?
	•	부끄럽지 않은가?(타이밍·톤·공개 범위)

⸻

15) 프리모텀(우려와 대응, 인간적 버전)
	•	설문 피로: 문항을 줄이기보다 언어를 가볍게—“요즘, 하나만 고르자면?”
	•	개인정보 걱정: 칩 단위 토글을 첫 화면에 둔다(설정 메뉴로 숨기지 않는다).
	•	무반응: 결과 화면에 선택형 첫 질문을 즉시 띄운다(예/아니오 대신 A/B).

⸻

부록 A — 아이스브레이커 문장 샘플 12
	•	“하나만 고르자면, ○○ vs ○○?”
	•	“최근에 ○○ 보며 웃었던 순간, 떠오르는 거 있어요?”
	•	“○○ 입문자에게 한 문장 추천해준다면?”
	•	“이 동네에서 ○○ 하기 좋은 곳, 1곳만 공유해요!”

부록 B — 마이크로카피 10
	•	버튼: “바로 얘기하기”, “나중에 저장”
	•	빈 상태: “공통칩을 더 발견하려면, 이번 주 질문 3개만 더”
	•	공유: “링크만 건네면, 대화는 자연히 옵니다.”
	•	프라이버시: “이 칩은 지금 자리에서만 보입니다.”

⸻

### 취미 공유 플랫폼: 사람과 사람을 연결하는 진짜 관심사

새 학기가 시작될 때마다 우리는 `자기소개`라는 형식을 반복합니다. `이름, 학과, 나이`. 매번 같은 반복 속에서 진정한 관계가 형성되기 어렵습니다. 가끔 `인스타그램`을 공유하거나 `MBTI`로 분위기를 띄우지만, 그것도 **`*잠시*`**뿐입니다.

**문제 상황**

- 스토리북
    1. 새 학기. `새로운 사람`들을 만나는 시간이 종종 있다.
    2. 늘 그렇듯. `자기소개`를 번갈아 한다. 이름/학과/나이 끝.
    3. 자기소개를 해줘도 의미가 없다. 분위기가 살지 않는다
    4. `인스타그램`을 공유한다. 종종 “여기 너도 가봤어?” 하지만, 교환하고 끝이다.
    5. 누군가 `MBTI`를 물어본다. 분위기가 산다.
    6. 누군가 물꼬를 튼다. “나는솔로 보는사람?”
        1. 나는 솔로 애청자가 물꼬를 받는다. ”24기 영식?”
        2. 분위기가 살아난다. 둘은 베프가 되었다.
    7. 친구는 끼리끼리라는 말이 있다. 
        1. 새로 누군가를 만나. 운이 좋게 던진 주제가 상대방도 공감한다면
        2. 우리는 “잘 맞는다” 라고 표현한다.
        3. 이 운빨 친구게임을 보완하자.
    8. needs: 요즘 친구들이 인스타를 많이 함. 그 이유는 ‘스토리’임. 그 이유는 ‘스토리’로 스몰톡 걸기가 너무너무 쉬움. 그걸로 친해지는게 큼. 즉, 말로만 친구인 관계 중에 관심사가 서로 같은게 있으면 더 친해짐
    9. needs: 내 주위 사람들 중에 ‘나는 솔로’보는 사람이 있었으면 좋겠다
    10. needs: ‘친구 중’에 운동하는 사람이 있었으면 좋겠다.
    11. 스토리 소통 : 
- 자기소개는 피상적이고 일시적이며, 깊이 있는 관계로 이어지지 않습니다.
- 관심사를 알게 되면 빠르게 친밀감이 형성되지만, 공통 관심사를 찾기 어렵습니다.

"친구는 끼리끼리"라는 말처럼, 우리는 공통의 관심사로 진정한 친구를 만듭니다. 하지만 이 과정은 지금까지 우연에 맡겨져 있었습니다.

**해결하고자 하는 Needs**

- 주변에 나와 같은 취미나 관심사가 있는 사람을 빠르게 찾고 싶습니다.
- 표면적인 정보가 아니라 진짜 좋아하는 활동이나 주제를 중심으로 교류하고 싶습니다.
- 일상적 관심사를 쉽게 공유하고, `오프라인`에서 관계를 더욱 깊이 있게 만들고 싶습니다.

### "껀덕지" 플랫폼

단순한 SNS 교환에서 벗어나, 개인의 진짜 관심사를 중심으로 연결을 만듭니다. 사람들은 "커몬"이라는 링크를 주고받고, 이를 통해 공통 관심사를 즉각적으로 발견합니다.

### 코어 기능

- 간단하고 명료한 개인 정보: `넷플릭스 시청 목록`, `최근 운동`, `출신 지역`, `최근 읽은 책`,  등등
- 자동으로 공통 관심사를 찾아주고 대화를 유도합니다.
    - 예시: "두 분 모두 '나는 솔로' 24기 영식을 보셨어요! 어떻게 생각하시나요?"
    - **"두 분 모두 송파구에서 태어나셨네요! 어느 초등학교를 나오셨나요?"**
    - "두 분 모두 최근에 '군주론'을 읽으셨습니다! 가장 기억에 남는 구절이 있나요?"
- 위 문구는 UX를 위한 가이드텍스트일 뿐, 두 사람의 공통 관심사를 보기 좋게 리스트업 하는게 가장 중요 포인트.
    
    <내용(링크트리, 명함과 유사함.)>
    
    인스타 → ~
    
    넷플릭스 → ~~폭싹 속았수다 시청
    
    어제 한 운동 → 
    
    다니는 헬스장 → 
    
    사는 곳 → ~~~
    
    태어난 곳 → ~~~
    
    어제 읽은 책 → 군주론 → 짱 재밌었다.
    

### UX 철학 및 설계 포인트

- 빠르고 간편한 공유를 위해 `QR 코드`를 활용
- 사용자가 부담 없이 자신의 관심사를 입력할 수 있도록 설문조사의 UX가 매우 중요
    - MBTI 검사의 1/3 분량,
    - 주기적으로 재밌는 질문으로 추가 정보 획득도 중요한 포인트.
- 추가) 사용자 간 소통을 자연스럽게 유도하는 채팅과 설문조사 기능

### 차별화 전략 및 확장성

- 문토, 프립, 챌린저스 등의 기존 플랫폼과 달리 오프라인 만남에서의 관계 발전을 우선 목표로 함
- N:M 구조의 관심사 중심 게시판으로 향후 커뮤니티 활성화 가능
- 이벤트성 키워드를 활용하여 유행을 선도할 수 있는 구조 (MBTI처럼)

### 최종 목표

"커몬" 플랫폼은 단순한 정보 교환을 넘어, 깊이 있는 인간관계 형성을 지원하는 `제2의 MBTI`로 자리 잡는 것을 목표. 

이 플랫폼을 통해 사람들은 더 이상 운에 의존하지 않고, 진정한 친구와 취미를 공유하며 즐거운 관계를 형성하게 될 것입니다.

### ETC

- `크리스마스`, `mbti 동물` 과 같은 이벤트성과 유사한 UX.
    - 체류시간을 위해서는 모바일까지 해야함. 모바일 이점은 체류와 푸시알림 대체 방안 고민 필요
- 비전
    - 1목표 “오프라인 친구와 더 친해지기”
        - 어색한 자리를 위함.
    - 2목표 “장기적으로 더 깊은 관계 만들어주기”
        - 개강파티때 친하게 놀고 영영 안보는 관계들을 위함
- 100% 회원가입제
- 주기적 정보 업데이트에 대한 리워드 설계 중요
- 

### 주요 챌린지

- 설문조사가 지루하면 안됨. (최소한 MBTI 보다)
    - 주기적으로 정보를 업데이트 할 수 있게
- 공유 시 사용자의 리액션이 무조건 나올 수 있도록 잘 꾸며진 결과물이 나와야함(3초안에 어?! 너도?!)
- QR대체 or 카카오톡 상메에 쓰기 좋은 링크형식 등 리멤버,링크드인 공유 방식보다 더 참신한 방식(like 토스)
- 업데이트를 어떻게 잘 할지 고민이 크게 필요하다
- 타겟
    - 완전 초면이냐 vs 이름은 아는 사이이냐
- 어떻게 DB 매칭을 할건지?
- `유저시나리오` 정리
    - 중요한 issue가 될 만한 지점을 예상해보자
        - ex) 공개 비공개, 프라이버시,
        - ex) 유출, 팔로워
        - 웹앱 vs 모바일
        - `프로토 피그마`
- 4월21일