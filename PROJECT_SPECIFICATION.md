# 껀덕지 (Kkondeokji) 프로젝트 기획서

## 📋 프로젝트 개요
**껀덕지**는 QR 코드를 통한 만남과 AI 기반 설문조사를 통해 사용자 간의 궁합을 분석하는 매칭 플랫폼입니다.

## 🎯 핵심 기능

### 1. 사용자 인증 및 프로필 관리
- Supabase Auth를 통한 이메일/비밀번호 로그인
- 사용자 프로필 정보 (이름, 나이, 직업) 관리
- 온보딩 플로우를 통한 초기 설정

### 2. AI 기반 개인화 설문조사
- 사용자 정보(이름, 나이, 직업)를 기반으로 한 AI 생성 설문
- Grok AI를 활용한 맞춤형 질문 생성
- 다양한 관심사 카테고리별 설문 템플릿
- 설문 응답을 통한 관심사 태그 추출

### 3. QR 코드 기반 매칭 시스템
- 사용자별 고유 QR 코드 생성
- QR 코드 스캔을 통한 상대방과의 매칭
- 아이디 직접 입력을 통한 매칭
- 매칭 링크 공유 기능

### 4. AI 기반 궁합 분석
- 설문 응답 기반 매칭 점수 계산
- 공통 관심사 분석 및 추출
- AI 인사이트를 통한 상세한 매칭 분석
- 매칭 결과 리포트 생성

### 5. 매칭 결과 및 프로필 관리
- 매칭 기록 관리
- 상대방 정보 표시
- QR 코드 공유 및 스캔 기능
- 매칭 리포트 상세 조회

## 🏗️ 기술 스택

### Frontend
- **Next.js 15** (App Router)
- **React 18** with TypeScript
- **Tailwind CSS** + **Shadcn UI**
- **Zustand** (상태 관리)
- **React Hook Form** + **Zod** (폼 관리)

### Backend & Database
- **Supabase** (인증, 데이터베이스, 실시간 기능)
- **PostgreSQL** (관계형 데이터베이스)

### AI & External Services
- **Grok AI** (설문 생성, 매칭 인사이트)
- **QR Code** 라이브러리

### Development Tools
- **TypeScript** (타입 안정성)
- **ESLint** (코드 품질)
- **pnpm** (패키지 관리)

## 📊 데이터베이스 구조

### 주요 테이블
1. **users** - 사용자 기본 정보
2. **survey_templates** - 설문 템플릿
3. **questions** - 설문 질문
4. **options** - 질문 선택지
5. **user_surveys** - 사용자 설문 진행 상태
6. **user_responses** - 사용자 설문 응답
7. **matches** - 매칭 결과
8. **qr_codes** - QR 코드 정보

## 🔄 사용자 플로우

### 신규 사용자
1. **회원가입/로그인** → 온보딩 페이지
2. **프로필 입력** (이름, 나이, 직업)
3. **AI 설문 생성** → 설문 진행
4. **QR 코드 생성** → 프로필 완성
5. **매칭 시작** (QR 스캔 또는 아이디 입력)

### 기존 사용자
1. **로그인** → 홈페이지
2. **설문 재진행** 또는 **매칭 시작**
3. **QR 스캔** 또는 **아이디 입력**
4. **매칭 결과 확인** → 리포트 조회

## 🎨 UI/UX 특징
- **그라데이션 배경** (초록-파랑)
- **카드 기반 레이아웃**
- **반응형 디자인** (모바일 우선)
- **직관적인 네비게이션**
- **로딩 상태 및 에러 처리**

## 🚀 현재 상태 및 개선 필요사항

### ✅ 완료된 기능
- 기본 인증 시스템
- 설문 템플릿 관리
- QR 코드 생성/스캔
- 기본 매칭 시스템
- 프로필 관리

### ⚠️ 개선 필요사항
1. **설문 커스터마이징**: 현재 랜덤 선택 → AI 개인화 설문 활성화
2. **인증 플로우**: 중복 코드 정리 및 에러 처리 개선
3. **프로필 UI/UX**: 매칭 결과 표시 개선, 상대방 정보 추가
4. **코드 정리**: 중복 코드 제거 및 리팩토링

## 📱 주요 페이지
- `/` - 홈페이지 (설문 시작)
- `/onboarding` - 온보딩 (회원가입 + 프로필 입력)
- `/auth/login` - 로그인
- `/survey` - 설문 진행
- `/profile` - 프로필 관리 (QR 코드, 매칭 기록)
- `/scan` - QR 코드 스캔
- `/match/[code]` - 매칭 페이지
- `/match/report/[id]` - 매칭 리포트

## 🔧 개발 환경
- **로컬 개발**: `pnpm dev`
- **빌드**: `pnpm build`
- **배포**: Vercel 자동 배포
- **데이터베이스**: Supabase 클라우드
